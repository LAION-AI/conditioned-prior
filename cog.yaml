# Configuration for Cog ⚙️
# Reference: https://github.com/replicate/cog/blob/main/docs/yaml.md
image: "r8.im/laion-ai/conditioned-prior"
build:
  gpu: true
  python_version: "3.8"
  python_packages:
    - aiohttp==3.8.1
    - aiosignal==1.2.0
    - albumentations==1.2.0
    - aniso8601==9.0.1
    - asttokens==2.0.5
    - async-timeout==4.0.2
    - autofaiss==2.14.3
    - backcall==0.2.0
    - braceexpand==0.1.7
    - certifi==2022.6.15
    - click==8.1.3
    - clip-anytorch==2.4.0
    - clip-retrieval==2.34.0
    - CoCa-pytorch==0.0.6
    - einops==0.4.1
    - einops-exts==0.0.3
    - ema-pytorch==0.0.8
    - embedding-reader==1.4.2
    - faiss-cpu==1.7.2
    - huggingface-hub==0.8.1
    - imageio==2.19.3
    - img2dataset==1.31.0
    - kornia==0.6.5
    - lpips==0.1.4
    - matplotlib==3.5.2
    - open-clip-torch==1.3.0
    - opencv-python==4.6.0.66
    - opencv-python-headless==4.6.0.66
    - pandas==1.4.3
    - Pillow==9.2.0
    - regex==2022.6.2
    - rotary-embedding-torch==0.1.5
    - scikit-image==0.18.3
    - scikit-learn==1.1.1
    - scipy==1.8.1
    - sentence-transformers==2.2.2
    - sentencepiece==0.1.96
    - tokenizers==0.12.1
    - torch==1.10.1
    - torchvision==0.11.2
    - tqdm==4.64.0
    - transformers==4.20.1
    - vector-quantize-pytorch==0.7.3
    - Werkzeug==2.1.2
    - x-clip==0.7.0
    - yarl==1.7.2

  
  run:
    - pip install 'git+https://github.com/Veldrovive/DALLE2-pytorch@f4b687798d367fc434d8127ab31141f0fea0db26#egg=dalle2-pytorch'
    - wget -q https://huggingface.co/laion/DALLE2-PyTorch/resolve/main/prior_ema_fp16.pth 
    - mkdir -p /root/.cache/clip && wget -c --output-document "/root/.cache/clip/ViT-L-14.pt" "https://openaipublic.azureedge.net/clip/models/b8cca3fd41ae0c99ba7e8951adf17d267cdb84cd88be6f7c2e0eca1737a03836/ViT-L-14.pt"

predict: "predict.py:Predictor"
